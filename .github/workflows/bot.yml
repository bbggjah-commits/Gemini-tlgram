name: ðŸ¤– Run Telegram Bot

on:
  push:
    branches: [ main ]
  workflow_dispatch:  # ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ÙŠØ¯ÙˆÙŠ
  schedule:
    # Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ ÙƒÙ„ 6 Ø³Ø§Ø¹Ø§Øª Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªÙˆÙ‚Ù
    - cron: '0 */6 * * *'

jobs:
  run-bot:
    runs-on: ubuntu-latest
    
    steps:
    - name: ðŸš€ checkout code
      uses: actions/checkout@v4
      
    - name: ðŸ setup python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
        
    - name: ðŸ“¦ install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        
    - name: ðŸ”§ create env file
      run: |
        cat > .env << EOF
        TELEGRAM_BOT_TOKEN=${{ secrets.TELEGRAM_BOT_TOKEN }}
        GEMINI_API_KEY=${{ secrets.GEMINI_API_KEY }}
        EOF
        
    - name: ðŸ” view env info
      run: |
        echo "Bot is starting..."
        echo "Python version: $(python --version)"
        echo "Current directory: $(pwd)"
        ls -la
        
    - name: ðŸƒ run bot
      run: |
        python github_runner.py
      env:
        TELEGRAM_BOT_TOKEN: ${{8523857587:AAEdH8zWdaGhoKSF3oUbgY-VhzPDHlz2iGI}}
        GEMINI_API_KEY: ${{AIzaSyAMF0F9gFAn7PUW29ut0RQmwTtXmz-N7qY}}
